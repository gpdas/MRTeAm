digraph robot_controller {
#	rankdir=LR;
	size="8,12"

	# node [style=invis] START;
	node [shape=ellipse, label="running"] running;
	node [shape=ellipse, label="paused"] paused;
	node [shape=ellipse, label="bid"] bid;
	node [shape=ellipse, label="won"] won;
	node [shape=ellipse, label="choose_goal"] choose_goal;
	node [shape=ellipse, label="send_goal_to_nav_stack"] send_goal_to_nav_stack;
	node [shape=ellipse, label="goal_success"] goal_success;
	node [shape=ellipse, label="goal_failure"] goal_failure;
	node [shape=point] start;
	
	start        -> running;
	running      -> choose_goal [label="has_goal"];

	# Make a bid
	running      -> bid [label="task_announced"];
	bid          -> running [label="bid_sent"];

	# Task won; add to agenda
	running      -> won [label="task_won"];
	won          -> running [label="goal_added"];

	# Agenda is non-empty; choose a goal and go to it.
	choose_goal  -> send_goal_to_nav_stack [label="goal_chosen"];
	send_goal_to_nav_stack    -> running [label="goal_sent_to_nav_stack"];

	# Pause/resume
	running      -> paused [label="pause"];
	paused       -> running [label="resume"];

	# Success/failure
	running      -> goal_success [label="goal_reached"];
	goal_success -> running [label="resume"];

	running      -> goal_failure [label="goal_failed"];
	goal_failure -> running [label="resume"];
	
}